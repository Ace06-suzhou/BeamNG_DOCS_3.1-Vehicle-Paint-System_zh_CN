---
title: Paint distribution
weight: 6
date: 2025-08-27T22:25:39.875Z
---

涂装分布系统用于在交通车辆中生成更真实的涂装颜色分布。
未来计划将该系统扩展应用于生涯模式中的各类随机车辆生成系统，例如比赛对手和经销商库存等。


### 实现方式

在用于交通系统的车辆主 `info.json` 文件中，我们会添加一些新的属性：
```js
"defaultRandomPaintProbability": 1,
"defaultRandomMultiPaintProbability": 1,
"randomPaintDistribution":{
  "white":5,
  "silver":4,
  "gray":1,
  "black":4,
  "Old White":4,
  "Pearl Black":4,
  "Old Black":4,
  "Metallic Blue":4,
  "Dark Blue":3,
  "Blue Silver":3,
  "Teal":3,
},
"randomMultiPaintDistribution":{
  "team_offroad_colors":10,
  "rennspecht_green_colors":1,
},
```

这会为交通车辆使用的随机涂装选择函数添加权重。`defaultRandomPaintProbability` 是应用于每个可用涂装的默认权重。随后，在 `randomPaintDistribution` 列表中，可以为特定涂装覆盖其权重，以提高或降低其在交通中生成的概率。`defaultRandomMultiPaintProbability` 和 `randomMultiPaintDistribution` 也采用相同的机制。


各个独立配置也可以使用相同的属性。它们会覆盖在主 `info.json` 文件中声明的对应属性。
可以新增新的涂装权重，也可以替换已有的单个权重，而未被修改的权重将从主 `info.json` 文件中继承。
例如，可以通过在该配置的 `info` 文件中覆盖某种颜色的权重，使该配置以该颜色生成的概率提高 10 倍。


此外，配置的info文件还可以使用新的 `ignoreModelRandomPaintDistribution` 属性。若将其设置为true，则会在该特定配置中替换整个 `randomPaintDistribution` 列表。
可以利用此属性来限制某些颜色在特定配置中被使用。
对于 [多涂装设置](/modding/vehicle/vehicle_paints/multi_paint_setup)，也提供了对应的 `ignoreModelRandomMultiPaintDistribution` 选项。



### 测试

手动验证加权涂装分布可能较为繁琐，因此提供了一个控制台命令用于自动化测试：


`core_vehiclePaints.testRandomPaint('model', 'config', #samples)`

参数依次为车辆的内部模型名称、其配置名称（可设置为 `nil` 以测试该车辆的所有配置），以及用于测试的样本数量。控制台将模拟生成指定数量的车辆/配置（不会实际生成实体车辆），并列出重复出现的涂装。每个条目都会显示生成次数、百分比、类型（涂装或多重涂装设置），以及在三个调色板上所使用的涂装名称。


实例1: 1000 paints for simple_traffic model
![](dist_vehicle.png)
*core_vehiclePaints.testRandomPaint('simple_traffic', nil, 1000)*

实例2: 1000 paints for simple_traffic model with the van_delivery config
![](dist_config.png)
*core_vehiclePaints.testRandomPaint('simple_traffic', 'van_delivery', 1000)*
